@(session: ThinkingSession, cards: List[Card], hat: Hat, user: User)

@import helper._
@import models._
@import views._


@main(session.title, hat) {
								
	<div class="well" id="progressbar">
			@progressbar.render
	</div>		

	<div id="hat" class="@hat.name.toLowerCase">
				
		<script type="text/javascript">
			var CARDS = @Html(Card.listToJson(cards).toString);
			var SESSION_ID = @session.id;
			var HAT = "@hat.name.toLowerCase";
			var WSURI = "ws://" + window.location.host + "/wamp";
			var CALL_URI = "http://sixhats.com/cards";
			//console.log(CARDS);

			// set up socket on load event
			window.onload = function() {
				instantiateSocket();
			};
			var TOOLTIPS = {
				"white": "The White Hat calls for information known or needed. The facts, just the facts.",
				"yellow": "The Yellow Hat symbolizes brightness and optimism. Under this hat you explore the positives and probe for value and benefit.",
				"red": "The Red Hat signifies feelings, hunches and intuition. When using this hat you can express emotions and feelings and share fears, likes, dislikes, loves, and hates.",
				"blue": "The Blue Hat is used to manage the thinking process. It's the control mechanism that ensures the Six Thinking Hats guidelines are observed.",
				"black": "The Black Hat is judgment - the devil's advocate or why something may not work. Spot the difficulties and dangers; where things might go wrong.",
				"green": "The Green Hat focuses on creativity; the possibilities, alternatives, and new ideas. It's an opportunity to express new concepts and new perceptions."
			};
			// set up initial tooltip
			$(function() {
				if ($('#form-user').val() !== "") {
					$('#first-time').remove();
				}
				moveTo(HAT);
			});
		</script>
				
						
		<div id="hat-feed" class="well col-md-3">
		  @hatfeed.render
		</div>
		<div id="hat-cards" class="col-md-9">
						
			<div class="row" id="card-create">
					<div class="form-group">
						<input type="hidden" name="hat" id="form-hat" value="@hat.name.toLowerCase"/>
						<input type="hidden" name="form-user" id="form-user" value="@user.name"/>
						<input type="hidden" name="imgUrl" id="imgUrl" />
						<input type="hidden" name="imgMine" id="imgMime" />
						
						
						<div class="col-xs-4">
							<input data-toggle="popover" data-placement="bottom" data-trigger="manual" 	type="text"
								class="form-control" name="content" id="content" placeholder="Add new Card"/>
						</div>
						<button type="button" class="btn btn-info" id="addFile">Add File</button>
						
						<button type="submit" class="btn btn-success" id="btnAddCard">Add Card &raquo;</button>
						<button type="button" class="btn btn-info pull-right" id="indicate-ready">Move to next Hat</button>
						<button type="button" class="btn btn-info pull-right" id="indicate-finish" style="display:none;" data-toggle="modal" data-target="#myModal">Finish!</button>
					</div>
			</div>
								
			<div id="cards" class="well">
				@if(cards.isEmpty) {
					<h3>No cards yet</h3>
				}
				<div id="cards-list">
					<!-- generated by handlebars -->
				</div>
			</div>
							
		</div>
				
	</div>

}


<div id="hatchange-modal" class="modal fade" data-backdrop="static">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title">You're now wearing a <span class="hat"></span> hat!</h4>
			</div>
			<div class="modal-body">
				<p>
					<strong class="message"></strong>
				</p>
				<div id="first-time">
					<hr/>
					<p>It seems like this is the first time you're visiting!</p>
					<form role="form">
						<div class="form-group">
					    	<label class="control-label" for="modal-username">Please enter your name:</label>
					    	<input type="text" class="form-control" id="modal-username"/>
					  	</div>
					</form>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" id="modal-button" >Close</button>
			</div>
		</div>
	</div>
</div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
     @dashboard.render
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<script id="card-template" type="text/x-handlebars-template">
		<div data-cardid="{{id}}" class="card {{hat}}">
				<span class="name">@@{{username}}:</span>
				<div class="content">{{content}}</div>
		</div>
</script>
