@(sessionId: Long, cards: List[Card], hat: Hat)

@import helper._
@import models._
@import views._


@main("Cards") {
	
	<div id="hat" class="white">
	
		
	<script>
		var Cards = @Html(Card.listToJson(cards).toString);
	</script>
	
		@hatfeed.render
		
		<div id="hat-cards" class="col-md-9">
		
			<div id="card-create">
				@helper.form(action = routes.Cards.restFormAddCard(sessionId,hat.id), 'class -> "form-horizontal", 'id -> "card-form") {
					<div class="form-group">
						<input type="hidden" name="hat" id="hat" value="@hat.name"/>
					    <div class="col-xs-4">
					    	<input type="text" class="form-control" name="content" id="content" placeholder="Add new Card"/>
					    </div>
						<button type="submit" class="btn btn-success">Add Card &raquo;</button>
						<!-- 
							<button type="button" class="btn btn-info pull-right" id="indicate">Move to next Hat</button>
							<button type="button" class="btn btn-warning pull-right" id="finish">Finish Session</button>
						 -->
					</div>
	            }
			</div>
			
			<div id="cards" class="well">
				@if(cards.isEmpty) {
					<h3>No cards yet</h3>
				}
				<div id="cards-list">
					@cards.map { card =>
						@* todo generate this through client-side json using handlebars *@
						<div class="card @Hat.getHatName(card.hat.id)">
							@card.content
							by
							<i>{{user}}</i>
						</div>
					}
				</div>
			</div>
			
			
			<div class="row" id="progressbar">
				@*progressbar.render*@
			</div>
			
		</div>
		
	</div>

}

<script type="text/javascript">
$(function() {
	addBubbleToProgressBar("white", 16);
	renderProgressOutline();
});
</script>
<script id="card-template" type="text/x-handlebars-template">
	<div data-cardid="{{id}}" class="card {{hat}}">
		{{content}}
		by
		<i>{{user}}</i>
	</div>
</script>
