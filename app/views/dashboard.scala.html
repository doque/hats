@(hatElapsedTime:List[(String, Long)], usrIDs: List[Long], userWithHats:List[(String, List[Long])])
@import models._

@main("Dashboard", null) {
	<div id="wrapper">
		<div id="page-wrapper">
			<div class="row">
				<div class="col-lg-12">
					<h1>Dashboard <small>Statistics Overview</small></h1>
					<ol class="breadcrumb">
						<li class="active"><i class="fa fa-dashboard"></i>Dashboard</li>
					</ol>
				</div>
			</div><!-- /.row -->
			<div class="row">
			<div class="col-lg-12">
					<div class="panel panel-primary">
						<div class="panel-heading">
							<h3 class="panel-title"><i class="fa fa-long-arrow-right"></i> Bucket Thing(Not Ready Yet)</h3>
						</div>
						<div class="panel-body">
							<div id="cards-user-bucket"> </div>
						</div>
					</div>
				</div>	
			</div><!-- /.row -->
			<div class="row">
			<div class="col-lg-12">
					<div class="panel panel-primary">
						<div class="panel-heading">
							<h3 class="panel-title"><i class="fa fa-long-arrow-right"></i> Card Status for Each User</h3>
						</div>
						<div class="panel-body">
							<div id="cards-user-current-session"> </div>
						</div>
					</div>
				</div>	
			</div><!-- /.row -->	
				<div class="col-lg-6">
					<div class="panel panel-primary">
						<div class="panel-heading">
							<h3 class="panel-title"><i class="fa fa-long-arrow-right"></i> Elapsed Time Per Hat(Current Session)</h3>
						</div>
						<div class="panel-body">
							<div id="elapsed-time-chart-donut" style="background-color:#F0EDDA;" ></div>
						</div>
					</div>
				</div>
			</div><!-- /.row -->				
		</div><!-- /#page-wrapper -->	
	</div><!-- /#wrapper -->
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
	<script type="text/javascript" src="//cdn.jsdelivr.net/morris.js/0.4.1/morris.min.js"></script>
	<script src="http://code.highcharts.com/highcharts.js"></script>
	<script src="http://code.highcharts.com/modules/exporting.js"></script>
	<script>
	
	$(function() {
	

	    $("table").tablesorter({
	        debug: true
	    });
	
		var hatArray = [];
		var hatColor = [];
		var cardArray = [];
		var hColor = [] ;
		var userArray =[];
		var resultArray =[];
		@for(hTime <- hatElapsedTime){
			var obj = {
	        value: @hTime._2,
	        label: '@hTime._1',
	    }
	    hatArray.push(obj);
	    hatColor.push("@hTime._1.toLowerCase")
		}
		Morris.Donut({
			element: 'elapsed-time-chart-donut',
				data: hatArray,
				colors: hatColor
		});	
	
		 @for(sUserWithHats <- userWithHats ){
		 	cardArray.push(@sUserWithHats._2);
		 	var obj = {
	        	data: cardArray,
	        	name: '@sUserWithHats._1',
	    	}
	    	cardArray = [];
	    	resultArray.push(obj);
		 }
	    
	 	@for( uID <- usrIDs ){
			userArray.push('@uID')
	 	}
	 	
		$('#cards-user-current-session').highcharts({
				colors: ["#FFFF00", "#4876FF", "#E6E6FA", "#000033", "#FF0066", "#669966"],
	            chart: {
	            	 backgroundColor: {
	         			linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
	         				stops: [
	            				[0, 'rgb(96, 96, 96)'],
	            				[1, 'rgb(230, 230, 250)']
	         				]
	     				 },
	                type: 'column'
	            },
	            title: {
	                text: 'No. of Cards Per User'
	            },
	            xAxis: {
	                categories: userArray
	            },
	            yAxis: {
	                min: 0,
	                title: {
	                    text: 'Total Cards'
	                },
	                stackLabels: {
	                    enabled: true,
	                    style: {
	                        fontWeight: 'bold',
	                        color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
	                    }
	                }
	            },
	            legend: {
	                align: 'right',
	                x: -70,
	                verticalAlign: 'top',
	                y: 40,
	                floating: true,
	                backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColorSolid) || 'white',
	                borderColor: '#CCC',
	                borderWidth: 1,
	                shadow: false
	            },
	            tooltip: {
	                formatter: function() {
	                    return '<b>'+ this.x +'</b><br/>'+
	                        this.series.name +': '+ this.y +'<br/>'+
	                        'Total: '+ this.point.stackTotal;
	                }
	            },
	            plotOptions: {
	                column: {
	                    stacking: 'normal',
	                    dataLabels: {
	                        enabled: true,
	                        color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
	                    }
	                }
	            },
	            series: resultArray
	        });
		});
	</script>
}